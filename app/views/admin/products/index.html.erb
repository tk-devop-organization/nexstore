<!-- app/views/products/index.html.erb -->
<div class="container mt-5">
  <h1 class="text-center mb-4">Product List</h1>

  <table class="table table-bordered table-striped table-hover">
    <thead class="thead-dark">
    <tr>
      <th scope="col">#</th>
      <th scope="col">Image</th>
      <th scope="col">Name</th>
      <th scope="col">Description</th>
      <th scope="col">Price</th>
      <th scope="col">Actions</th>
    </tr>
    </thead>
    <tbody>
    <% @products.each_with_index do |product, index| %>
      <tr>
        <th scope="row"><%= index + 1 %></th>
        <td>
          <% if product.images.attached? %>
            <%= image_tag product.images.first, class: "img-thumbnail", alt: product.name %>
            <%#= image_tag product.images.first.variant(resize: "150x150"), class: "img-thumbnail", alt: product.name %>
          <% else %>
            <%#= image_tag "placeholder.jpg", class: "img-thumbnail", alt: "No Image Available", size: "150x150" %>
          <% end %>
        </td>
        <td><%= product.name %></td>
        <td><%= truncate(product.description, length: 50) %></td>
        <td>$<%= product.price %></td>
        <td>
          <%= link_to 'View', admin_product_path(product), class: "btn btn-sm btn-primary" %>
          <%= link_to 'Edit', edit_admin_product_path(product), class: "btn btn-sm btn-warning" %>
          <%= link_to 'Delete', admin_product_path(product), method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-sm btn-danger" %>

        </td>
      </tr>
    <% end %>
    </tbody>
  </table>
</div>
